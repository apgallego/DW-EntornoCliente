<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>FORMULARIO - alfredoPuertaDW2E</title>
        <style>
        .main-container{
            margin: auto;
            /* border: 1px solid; */
            position: relative;
            width: 200px;
            display: block;
        }
        .main-container  > *{
            padding: 5px;
        }
        input:hover{
            background-color: yellow;
        }
        textarea{
            resize: none;
        }
        label{font-weight: bold;}
        label[for="male"], label[for="female"], label[for="6feet"], label[for="200pounds"]{font-weight: normal;}

        /* *{border: 1px solid black;} */
        </style>
        <script>
            var inputs = [];
            function iniciar(){
                let form = document.getElementById('form');
                inputs = document.getElementsByTagName('input');
                for(let i = 0; i < inputs.length; i++){
                    inputs[i].addEventListener('input', validarInput);
                }
                document.getElementById('eyeColor').addEventListener('change', validarInput);
                // document.getElementById('submit').addEventListener('click', function(){
                //     for(let i = 0; i < inputs.length; i++){
                //         if(!inputs[i].value && inputs[i].getAttribute('required')){
                //             console.log('skere');
                //             inputs[i].style.backgroundColor = 'purple';
                //         }
                //     }
                // });
            }

            function validarInput(){
                if(this.checkValidity()){
                    switch(this.id || this.name){
                        case 'nombre':
                        case 'email':
                        case 'autComs':
                        case 'phoneNumber':
                        case 'eyeColor':
                            this.style.transition = 'all .5s';
                            this.style.outline = '2px solid lime';
                            this.style.backgroundColor = 'rgba(0, 255, 0, 0.3)';
                            if(this.id == 'phoneNumber') this.value = this.value.substring(0, 3) + ' - ' + this.value.substring(3, 6) + ' - ' + this.value.substring(6, 9);
                            if(this.id == 'eyeColor'){
                                this.style.backgroundColor = this.value;
                                this.style.color = 'white';
                            }
                            break;
                    }
                } else {
                    this.style.transition = 'all .5s';
                    this.style.outline = '2px solid red';
                    this.style.backgroundColor = 'rgba(255, 0, 0, 0.3)';
                    if(this.id == 'phoneNumber')this.value = this.value.split(' - ').join('');
                    //smth with icons (also inside inputs)
                }
            }

            function crearNodo(tipo, padre, id, clase, inner){
                var nodo = document.createElement(tipo);
                if(id != '') nodo.id = id;
                if(clase != '') nodo.className = clase;
                if(inner != '') nodo.innerHTML = inner;
                padre.appendChild(nodo);
                return nodo;
            }

            window.onload = iniciar;
        </script>
    </head>
    <body>
        <form id="form" class="main-container">
            <h1>Formulario</h1>

            <div class="div-nombre" id="divNombre">
                <label for="nombre">Nombre *</label>
                <input type="text" id="nombre" pattern='^[a-zA-Z\s\.]{4,}$' required>
            </div>

            <div class="div-sex" id="divSex">
                <label for="sex">Sexo *</label>
                <div id="sexRadioButtons">
                    <input type="radio" id="male" name="sex" required/>
                    <label for="male">Male</label>
                    <input type="radio" id="female" name="sex" required/>
                    <label for="female">Female</label>
                </div>
            </div>

            <div class="email" id="email">
                <label for="email">Email *</label>
                <input type="email" id="email" pattern='^([a-z]|\d)+@([a-z]|\\d)+\.[a-z]{2,4}$' required/>
            </div>

            <div class="aut-community" id="autCommunity">
                <label for="autComs">Comunidad Autónoma *</label>
                <input list="autComs" name="autComs" required>
                <datalist id="autComs" name="autComs">
                    <option value="Madrid"></option>
                    <option value="Castilla - La Mancha"></option>
                    <option value="Andalucía"></option>
                </datalist>
            </div>

            <div class="phone" id="phone">
                <label for="phoneNumber">Teléfono *</label>
                <input type="tel" id="phoneNumber" pattern="^(6|7)\d{8}$" required/>
            </div>

            <div class="div-eye-color" id="divEyeColor">
                <label for="eyeColor">Color de ojos</label>
                <select name="eyeColor" id="eyeColor">
                    <option value="grey">None</option>
                    <option value="green">Green</option>
                    <option value="brown">Brown</option>
                    <option value="blue">Blue</option>
                    <option value="black">Black</option>
                    <option value="red">Sharingan</option>
                </select>
            </div>

            <div class="checks" id="checks">
                <label>Marcar las que coincidan</label>
                <div class="div-checks" id="div-checks">
                    <input type="checkbox" id="6feet"/>
                    <label for="6feet">Over 6 feet tall</label>
                    <br/>
                    <input type="checkbox" id="200pounds"/>
                    <label for="200pounds">Over 200 pounds</label>
                </div>
            </div>

            <div class="desc-ability" id="descAbility">
                <textarea name="ath-ability" id="ath-ability" cols="30" rows="5"></textarea>
            </div>

            <div class="div-submit" id="divSumbit">
                <button id="submit" type="submit">Enter my information</button>
                <button type="reset">Reset my information</button>
            </div>
        </form>
    </body>
</html>