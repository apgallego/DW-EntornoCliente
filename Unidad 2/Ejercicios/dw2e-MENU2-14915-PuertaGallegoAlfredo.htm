<!DOCTYPE html
	PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>menu2 - alfredoPuerta DW2E</title>

    <h1>CÓDIGO#NOMBRE#ANCESTRO</h1>
    
    <p id="lista"></p>
	
    <script>
        //todos los sitios posibles de la lista
        var sitios = [
            'A1#america#00',
            'A2#europa#00',
            'A3#africa#00',
            'A4#asia#00',
            'B1#canada#A1',
            'B2#eeuu#A1',
            'B3#brasil#A1',
            'B4#argentina#A1',
            'B5#urugay#A1',
            'B6#chile#A1',
            'B7#francia#A2',
            'B8#italia#A2',
            'C1#toronto#B1',
            'C2#quebec#B1',
            'C3#lyon#B7',
            'C4#paris#B7',
            'C5#bayona#B7',
            'C6#nantes#B7',
            'C7#toulouse#B7'
        ];

        //dividimos la lista en los posibles continentes
        var continentes = sitios.filter(function(sitios){
            for(let i = 0; i < sitios.length; i++){
                return sitios[i].startsWith('A');
            }
        });

        //dividimos la lista en los posibles países
        var paises = sitios.filter(function(sitios){
            for(let i = 0; i < sitios.length; i++){
                return sitios[i].startsWith('B');
            }
        });
        
        //dividimos la lista en las posibles ciudades
        var ciudades = sitios.filter(function(sitios){
            for(let i = 0; i < sitios.length; i++){
                return sitios[i].startsWith('C');
            }
        });

        //función que se ejecutará una vez la página haya cargado por completo
        function iniciar(){
            document.getElementById('lista').innerHTML = sitios.join('<br/>');
            crearRuta('>home');
            crearMenuContinentes();
        }

        //función para crear nodos
        function crearNodo(tipo){
            var nodo = document.createElement(tipo);
            document.body.appendChild(nodo);
            return nodo;
        }

        //función para crear la ruta
        function crearRuta(ruta){
            if(document.getElementById('ruta')){
                cajaRuta.innerHTML = ruta;
            } else {
                var cajaRuta = crearNodo('a');
                cajaRuta.id = 'ruta';
                cajaRuta.innerHTML = ruta;
                cajaRuta.style.cssFloat = 'left';
            }
            crearSalto();
        }

        //función para crear salto entre la ruta y los nodos creados
        function crearSalto(height) {
			// div vacio sin dimensiones con clear left
			var ele = document.createElement('div'); // crear nodo
			ele.style.clear = 'left'; // css posicionamiento
			document.body.appendChild(ele);	// añadir nodo al dom 
		}

        //función que da estilos a los nodos creados
        function darEstilos(ele){
            ele.class = 'cajas';
            ele.style.width = '120px';
            ele.style.height = '20px';
            ele.style.border = '1px solid black';
            ele.style.textAlign = 'center';
            ele.style.cssFloat = 'left';
            ele.style.margin = '5px';
            ele.addEventListener('mouseenter', function(){
                //cuando el cursor esté encima, se añade una sombra y el cursor cambia a 'pointer'
                this.style.cursor = 'pointer';
                this.style.boxShadow = '1px 1px 3px black';
            });
            ele.addEventListener('mouseout', function(){
                //cuando el cursor no está encima, la sombra desaparece
                this.style.boxShadow = 'none';
            });
            ele.addEventListener('click', clickCaja);
            return ele;
        }

        //función que, la hacer click en las cajas, despliega el menú correspondiente 
        function clickCaja(){
            // var cajas = document.getElementsByClassName('cajas');
            var cajas = document.getElementsByTagName('div');
            for(let i = 0; i < cajas.length; i++){
                cajas[i].style.display = 'none';
            }
            
            if(this.innerHTML == 'america'){
                crearMenuPaises('A1');
                crearRuta(">america");
            }
            if(this.innerHTML == 'europa'){crearMenuPaises('A2');}
            if(this.innerHTML == 'africa'){crearMenuPaises('A3');}
            if(this.innerHTML == 'asia'){crearMenuPaises('A4');}
        }
        
        function crearMenuContinentes(){
            crearSalto();
            for(let i = 0; i < continentes.length; i++){
                var eleContinentes = crearNodo('div');
                eleContinentes.innerHTML = continentes[i].split('#')[1];
                darEstilos(eleContinentes);
            }
        }

        //crearMenuPaises()
        function crearMenuPaises(continente){
            crearSalto();
            var paisesFiltrados = paises.filter(function(){
                for (let i = 0; i < paises.length; i++) {
                    if(paises[i].includes(continente)){
                        return paises[i];
                    }
                }
            });

            console.log(paisesFiltrados);

            for(let i = 0; i < paisesFiltrados.length; i++){
                var elePaises = crearNodo('div');
                elePaises.innerHTML = paisesFiltrados[i].split('#')[1];
                darEstilos(elePaises);
            }
        }

        //crearMenuCiudades()
        function crearMenuCiudades(){
            // --
        }

        window.onload = iniciar;
	</script>

</head>

<body>
</body>

</html>